llm:
  provider: api-endpoint

api-endpoint:
  api_base: http://localhost:11434/v1
  api_key: ollama
  model: gpt-oss:20b
  max_retries: 3
  retry_delay: 1.0
  sleep_time: 0.5

generation:
  temperature: 0.0  # Crucial: 0.0 minimizes hallucination in 20B models
  top_p: 0.9
  max_tokens: 4096
  # Ensure your script passes {num_pairs} into the prompt template

prompts:
  qa_generation: |
    You are a clinical educator and SFT dataset architect. Your task is to transform the provided medical text into high-fidelity QA pairs for model training.

    ### ADAPTIVE REQUIREMENTS:
    1. **DYNAMIC QUANTITY & DEPTH**: 
       - Scalability: Generate 1-2 pairs for short summaries or definitions; up to {num_pairs} for dense clinical sections.
       - Complexity: Match the answer depth to the complexity of the topic. Management protocols require long-form reasoning; simple definitions should be concise.

    2. **STRICT GROUNDING & EVIDENCE**: 
       - Use ONLY numbers, dosages, timeframes, and statistics found in the "TEXT TO PROCESS".
       - **EVIDENCE LABELS**: ONLY include evidence markers (e.g., Grade C, Level 2+, P) if they are explicitly written in the provided text. DO NOT guess or invent evidence levels from your own training data.

    3. **INTEGRATED CLINICAL REASONING**: 
       - Avoid "fragmented" questions that only test one fact. 
       - Synthesize points: Combine a patient's symptoms or risk factors with the correct intervention found in the text.
       - Case-Based: Use phrases like "A patient presents with..." or "How should a clinician categorize..." to create realistic training data.

    4. **NO EXTERNAL KNOWLEDGE**: 
       - If the text mentions "iron therapy" but not a specific dose, do not include a dose. 
       - If the text is silent on a specific complication, do not mention it.

    **FORMATTING**: Output strictly as a flat JSON list of objects: [[{{"question": "...", "answer": "..."}}]]. Do not wrap the list in another list or add extra keys.

    ---
    TEXT TO PROCESS:
    {text}
    
    Output strictly in JSON format.